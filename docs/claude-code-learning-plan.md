# Claude Code å­¦ç¿’è¨ˆç”»ï¼ˆ2025å¹´9æœˆä»¥é™ã®æ–°æ©Ÿèƒ½ã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ï¼‰

> ä½œæˆæ—¥: 2026-02-08
> å¯¾è±¡: Claude CodeçµŒé¨“è€…ï¼ˆåŸºæœ¬æ“ä½œç¿’å¾—æ¸ˆã¿ã€hooks/ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ä½œæˆçµŒé¨“ã‚ã‚Šï¼‰
> è¨€èª: Python 3.14ï¼ˆuv / Ruff / tyï¼‰
>
> **ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³å‚ç…§:**
> - [uv](https://docs.astral.sh/uv/) - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ»ä»®æƒ³ç’°å¢ƒ
> - [Ruff](https://docs.astral.sh/ruff/) - ãƒªãƒ³ã‚¿ãƒ¼/ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
> - [ty](https://docs.astral.sh/ty/) - å‹ãƒã‚§ãƒƒã‚«ãƒ¼

## å­¦ç¿’ç›®æ¨™

æ—¥ã€…ã®é–‹ç™ºä½œæ¥­ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ãŸã‚ã€Claude Codeã®æœ€æ–°æ©Ÿèƒ½ã‚’ç¿’å¾—ã—ã€å®Ÿè·µçš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

## é€²æ—ç®¡ç†

å„ãƒ•ã‚§ãƒ¼ã‚ºã®å®Œäº†å¾Œã€ä»¥ä¸‹ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’æ›´æ–°ã—ã¦ãã ã•ã„ï¼š

- [x] ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤ã®æ›´æ–°
- [ ] ãƒ•ã‚§ãƒ¼ã‚º2: Hooksã®é«˜åº¦ãªæ´»ç”¨
- [ ] ãƒ•ã‚§ãƒ¼ã‚º3: Skills & Subagents
- [ ] ãƒ•ã‚§ãƒ¼ã‚º4: MCPçµ±åˆ
- [ ] ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
- [ ] ãƒ•ã‚§ãƒ¼ã‚º6: é«˜åº¦ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- [ ] ãƒ•ã‚§ãƒ¼ã‚º7: çµ±åˆã¨æœ€é©åŒ–

---

## ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤ã®æ›´æ–°ï¼ˆ0.5-1æ—¥ï¼‰

### 1.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [Memory](https://code.claude.com/docs/en/memory) â€” CLAUDE.mdã®é…ç½®ãƒ¬ãƒ™ãƒ«ï¼ˆ4ç¨®ï¼‰ã€`.claude/rules/`ã€`@import`æ§‹æ–‡ã€å†å¸°çš„ãƒ¡ãƒ¢ãƒªæ¤œç´¢
- [Settings](https://code.claude.com/docs/en/settings) â€” è¨­å®šã‚¹ã‚³ãƒ¼ãƒ—ã®å„ªå…ˆé †ä½ã€permissionsã€ç’°å¢ƒå¤‰æ•°è¨­å®š

**æ—¥æœ¬èªå‚è€ƒãƒªã‚½ãƒ¼ã‚¹:**
- [Claude Code ã®6ç¨®é¡ã®ãƒ¡ãƒ¢ãƒªã¨å„ªå…ˆé †ä½ã‚’ç†è§£ã—ã¦åŠ¹ç‡çš„ã«æ´»ç”¨ã—ã‚ˆã†](https://zenn.dev/kenfdev/articles/a8f8c5a24fd739) â€” 6ç¨®é¡ã®ãƒ¡ãƒ¢ãƒªã®å„ªå…ˆé †ä½ã¨Lazy-Loadã®ä»•çµ„ã¿ã‚’ä½“ç³»çš„ã«è§£èª¬
- [è„±ãƒ»ãƒ•ã‚¡ãƒƒãƒˆãƒ»CLAUDE.md](https://zenn.dev/smartshopping/articles/refactor-fat-claude-md) â€” CLAUDE.mdã®è‚¥å¤§åŒ–ã‚’`.claude/rules/`ã‚„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§è§£æ±ºã™ã‚‹æ‰‹æ³•

### 1.1 CLAUDE.mdã®æœ€é©åŒ–

**å­¦ç¿’å†…å®¹:**
- CLAUDE.mdã®éšå±¤æ§‹é€ ã¨é…ç½®å ´æ‰€
- `@path/to/import`ã«ã‚ˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- `.claude/rules/*.md`ã«ã‚ˆã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ï¼ˆpaths frontmatterã§ã®æ¡ä»¶ä»˜ããƒ«ãƒ¼ãƒ«ï¼‰

**CLAUDE.mdã®é…ç½®å ´æ‰€:**
| ãƒ¡ãƒ¢ãƒªã‚¿ã‚¤ãƒ— | å ´æ‰€ | ç”¨é€” |
|-------------|------|------|
| Managed | OSå›ºæœ‰ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | çµ„ç¹”å…¨ä½“ã®ãƒãƒªã‚·ãƒ¼ï¼ˆITç®¡ç†ï¼‰ |
| User | `~/.claude/CLAUDE.md` | å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šã®å€‹äººè¨­å®š |
| Project | `./CLAUDE.md` ã¾ãŸã¯ `./.claude/CLAUDE.md` | ãƒãƒ¼ãƒ å…±æœ‰ï¼ˆgitç®¡ç†ï¼‰ |
| Local | `./CLAUDE.local.md` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ãƒ»å€‹äººç”¨ï¼ˆè‡ªå‹•ã§gitignoreï¼‰ |

> **Note:** ã™ã¹ã¦ã®ãƒ¡ãƒ¢ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã¯èµ·å‹•æ™‚ã«è‡ªå‹•èª­ã¿è¾¼ã¿ã•ã‚Œã€éšå±¤ã®ä¸Šä½ãŒå„ªå…ˆã•ã‚Œã‚‹ã€‚

**ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹:**
- CLAUDE.mdã¯100-200è¡Œä»¥å†…ã«åã‚ã‚‹
- ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ï¼ˆbuild, test, lintï¼‰ã‚’æ˜è¨˜
- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¨å‘½åè¦å‰‡ã‚’æ–‡æ›¸åŒ–
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¨˜è¼‰

**ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®é…ç½®å ´æ‰€:**
| å ´æ‰€ | å„ªå…ˆåº¦ | ç”¨é€” |
|------|--------|------|
| `.claude/rules/*.md` | é«˜ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ«ãƒ¼ãƒ«ï¼ˆãƒãƒ¼ãƒ å…±æœ‰ï¼‰ |
| `~/.claude/rules/*.md` | ä½ | å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šã®å€‹äººãƒ«ãƒ¼ãƒ« |

> **Note:** User-level rulesï¼ˆ`~/.claude/rules/`ï¼‰ã¯Project rulesã‚ˆã‚Šå…ˆã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€Project rulesãŒå„ªå…ˆã•ã‚Œã‚‹ã€‚

**ãªãœã‚„ã‚‹ã®ã‹:**

Claude Codeã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«CLAUDE.mdã‚’èª­ã¿è¾¼ã¿ã€ã‚ãªãŸã®é–‹ç™ºã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã—ã¾ã™ã€‚ã—ã‹ã—ã€CLAUDE.mdãŒè‚¥å¤§åŒ–ã™ã‚‹ã¨ï¼š
- æ¯å›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¤§é‡æ¶ˆè²»ã—ã€ã‚³ã‚¹ãƒˆãŒå¢—åŠ ã™ã‚‹
- é‡è¦ãªæŒ‡ç¤ºãŒåŸ‹ã‚‚ã‚Œã¦ã€ClaudeãŒçš„ç¢ºã«å¾“ãˆãªããªã‚‹
- ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¨å€‹äººè¨­å®šãŒæ··åœ¨ã—ã€ç®¡ç†ãŒå›°é›£ã«ãªã‚‹

ã“ã®èª²é¡Œã§ã¯ã€CLAUDE.mdã‚’éšå±¤åŒ–ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã™ã‚‹ã“ã¨ã§ã€Œå¿…è¦ãªæƒ…å ±ã ã‘ã‚’å¿…è¦ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èª­ã¿è¾¼ã‚€ã€æ§‹é€ ã‚’ä½œã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡ãŒä¸ŠãŒã‚Šã€Claudeã®æŒ‡ç¤ºéµå®ˆç²¾åº¦ã‚‚å‘ä¸Šã—ã¾ã™ã€‚

**å®Ÿè·µèª²é¡Œ:**
1. ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®CLAUDE.mdã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€100-200è¡Œã«æœ€é©åŒ–
2. `.claude/rules/`ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ :
   - `code-style.md` - Pythonã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆRuff/tyé€£æºï¼‰
   - `testing.md` - pytestè¦ç´„
   - `git-workflow.md` - Gité‹ç”¨ãƒ«ãƒ¼ãƒ«
3. `~/.claude/CLAUDE.md`ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«ã®è¨­å®šã‚’ä½œæˆ
4. `~/.claude/rules/`ã«å€‹äººç”¨ã®å…±é€šãƒ«ãƒ¼ãƒ«ã‚’ä½œæˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

**æ¤œè¨¼:**
- Claudeã«ã€ŒPythonã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã€ã¨ä¾é ¼ã—ã€`code-style.md` ã®ãƒ«ãƒ¼ãƒ«ï¼ˆsnake_caseã€å‹ãƒ’ãƒ³ãƒˆç­‰ï¼‰ãŒé©ç”¨ã•ã‚Œã‚‹ã‹ç¢ºèª
- Claudeã«ã€ŒREADMEã‚’æ›´æ–°ã—ã¦ã€ã¨ä¾é ¼ã—ã€`code-style.md` ãŒé©ç”¨ã•ã‚Œãªã„ï¼ˆ`.py`ã®ã¿å¯¾è±¡ï¼‰ã“ã¨ã‚’ç¢ºèª
- `.claude/rules/git-workflow.md` ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„ã«å¾“ã£ã¦ã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ã‹ç¢ºèª

### 1.2 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç†è§£

**å­¦ç¿’å†…å®¹:**
- `.claude/settings.json` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆãƒãƒ¼ãƒ ã§å…±æœ‰ï¼‰
- `.claude/settings.local.json` - ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®šï¼ˆgitignoreå¯¾è±¡ï¼‰
- `~/.claude/settings.json` - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼ˆå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šï¼‰

**è¨­å®šã‚¹ã‚³ãƒ¼ãƒ—ã®å„ªå…ˆé †ä½ï¼ˆé«˜â†’ä½ï¼‰:**
1. **Managed** - ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ãŒè¨­å®šï¼ˆä¸Šæ›¸ãä¸å¯ï¼‰
2. **Command line arguments** - ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€æ™‚çš„ãªä¸Šæ›¸ã
3. **Local** (`.claude/settings.local.json`) - å€‹äººã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
4. **Project** (`.claude/settings.json`) - ãƒãƒ¼ãƒ å…±æœ‰è¨­å®š
5. **User** (`~/.claude/settings.json`) - å€‹äººã®ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šï¼ˆæœ€ä½å„ªå…ˆåº¦ï¼‰

> **é‡è¦:** LocalãŒProjectã‚’ä¸Šæ›¸ãã™ã‚‹ãŸã‚ã€å€‹äººè¨­å®šã¯Localã€ãƒãƒ¼ãƒ è¨­å®šã¯Projectã«é…ç½®ã€‚

**é‡è¦ãªè¨­å®šé …ç›®:**
```json
{
  "permissions": {
    "allow": ["Bash(uv *)"],
    "deny": ["Bash(rm -rf *)"]
  },
  "hooks": {},
  "statusLine": {}
}
```

**ãªãœã‚„ã‚‹ã®ã‹:**

Claude Codeã®å‹•ä½œã‚’åˆ¶å¾¡ã™ã‚‹settings.jsonã¯ã€ã©ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«è¨­å®šã™ã‚‹ã‹ã§æŒ™å‹•ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ï¼š
- ç‰¹å®šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯`rm -rf`ã‚’ç¦æ­¢ã—ãŸã„ãŒã€ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯è¨±å¯ã—ãŸã„
- ãƒãƒ¼ãƒ å…¨ä½“ã®è¨­å®šã¨å€‹äººã®å¥½ã¿ã‚’åˆ†é›¢ã—ãŸã„
- CIãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®è‡ªå‹•è¨±å¯ãƒ«ãƒ¼ãƒ«ã‚’è¨­å®šã—ãŸã„

è¨­å®šã®å„ªå…ˆé †ä½ã‚’ç†è§£ã™ã‚‹ã“ã¨ã§ã€ã€Œãªãœè¨­å®šãŒåæ˜ ã•ã‚Œãªã„ã®ã‹ã€ã¨ã„ã†ãƒˆãƒ©ãƒ–ãƒ«ã‚’é˜²ãã€ãƒãƒ¼ãƒ ã¨å€‹äººã®è¨­å®šã‚’é©åˆ‡ã«å…±å­˜ã•ã›ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

**å®Ÿè·µèª²é¡Œ:**
1. ç¾åœ¨ã®`~/.claude/settings.json`ã®permissionsã‚’ç¢ºèª
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®permissionsã‚’`.claude/settings.local.json`ã«è¨­å®š

**æ¤œè¨¼:**
- `settings.local.json` ã® allow ãƒªã‚¹ãƒˆã«ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰ãŒè¨±å¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãªã—ã§å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- `claude --debug` ã§èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª

**ç¢ºèªã‚³ãƒãƒ³ãƒ‰:**
```bash
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ç¢ºèª
ls -la ~/.claude/
ls -la .claude/

# Pythonç’°å¢ƒç¢ºèª
uv run ruff check app/
uv run ty check app/
```

### 1.3 æ—¢çŸ¥ã®ä¸å…·åˆã¨æ³¨æ„äº‹é …

**é‡è¦:** ãƒ•ã‚§ãƒ¼ã‚º1ã§æ‰±ã†CLAUDE.mdã¨rulesã‚·ã‚¹ãƒ†ãƒ ã«ã¯ã€2026å¹´2æœˆæ™‚ç‚¹ã§è¤‡æ•°ã®æ—¢çŸ¥ã®ä¸å…·åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’ç†è§£ã—ãŸä¸Šã§å­¦ç¿’ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚

#### 1.3.1 ãƒ‘ã‚¹ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ«ãŒWriteæ“ä½œã§é©ç”¨ã•ã‚Œãªã„ï¼ˆé‡å¤§ï¼‰

**å•é¡Œ:** `.claude/rules/`ã§å®šç¾©ã—ãŸpath-basedãƒ«ãƒ¼ãƒ«ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ï¼ˆWriteæ“ä½œï¼‰ã«èª­ã¿è¾¼ã¾ã‚Œãªã„ã€‚

- **GitHubã‚¤ã‚·ãƒ¥ãƒ¼:** [#23478](https://github.com/anthropics/claude-code/issues/23478), #16853, #21858, #24112
- **å½±éŸ¿:** ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆè¦ç´„ã®å¼·åˆ¶ã¨ã„ã†ä¸»è¦ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒæ©Ÿèƒ½ã—ãªã„
- **ç¾è±¡:**
  ```yaml
  ---
  paths:
    - "**/*.md"
  ---
  # Markdownãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ã¯å…ˆé ­ã«`# created`ã‚’è¿½åŠ ã™ã‚‹
  ```
  ã“ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©ã—ã¦ã‚‚ã€`Write`ãƒ„ãƒ¼ãƒ«ã§ã®æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ã«ã¯ç„¡è¦–ã•ã‚Œã‚‹ã€‚

**ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚°:**
- âœ… **Readæ“ä½œ**: ãƒ«ãƒ¼ãƒ«ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã‚‹
- âœ… **Editæ“ä½œ**: æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†å‰ã«ReadãŒç™ºç”Ÿã™ã‚‹ãŸã‚é©ç”¨ã•ã‚Œã‚‹
- âŒ **Writeæ“ä½œ**: ãƒ«ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œãšç„¡è¦–ã•ã‚Œã‚‹
- âŒ **MultiEditæ“ä½œ**: åŒæ§˜ã«ç„¡è¦–ã•ã‚Œã‚‹å¯èƒ½æ€§

**ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆæš«å®šå¯¾å‡¦ï¼‰:**
```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash hooks/post-write-rules-loader.sh"
          }
        ]
      }
    ]
  }
}
```
PostToolUseãƒ•ãƒƒã‚¯ã§Writeã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã€æ‰‹å‹•ã§Readã‚’å®Ÿè¡Œã—ã¦ãƒ«ãƒ¼ãƒ«ã‚’å¼·åˆ¶èª­ã¿è¾¼ã¿ã™ã‚‹3ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ãŒå¿…è¦ã€‚

**å½±éŸ¿ç¯„å›²:**
- ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆè¦ç´„ã‚’`.claude/rules/`ã§å¼·åˆ¶ã§ããªã„
- CLAUDE.mdã«ãƒ«ãƒ¼ãƒ«ã‚’é‡è¤‡è¨˜è¼‰ã™ã‚‹ã‹ã€ãƒ•ãƒƒã‚¯ã§å¯¾å‡¦ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

#### 1.3.2 CLAUDE.mdã®ãƒ«ãƒ¼ãƒ«ãŒç„¡è¦–ã•ã‚Œã‚‹

**å•é¡Œ:** Claude CodeãŒCLAUDE.mdã®ãƒ«ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ç¢ºèªå¿œç­”ã—ãŸå¾Œã‚‚ã€ç¹°ã‚Šè¿”ã—ãƒ«ãƒ¼ãƒ«ã«é•åã™ã‚‹ã€‚

- **GitHubã‚¤ã‚·ãƒ¥ãƒ¼:** [#19635](https://github.com/anthropics/claude-code/issues/19635), [#20401](https://github.com/anthropics/claude-code/issues/20401)
- **å½±éŸ¿:** ãƒ«ãƒ¼ãƒ«éµå®ˆã®ä¿¡é ¼æ€§ãŒä½ã„ã€ãƒˆãƒ¼ã‚¯ãƒ³æµªè²»ã€æ‰‹å‹•ä¿®æ­£ã®ç¹°ã‚Šè¿”ã—
- **ç¾è±¡ä¾‹:**
  - ã€Œgitã‚³ãƒŸãƒƒãƒˆå‰ã«å¿…ãšç¢ºèªã‚’æ±‚ã‚ã‚‹ã€ã¨ã„ã†ãƒ«ãƒ¼ãƒ« â†’ ç¢ºèªãªã—ã§ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã‚’3å›ç¹°ã‚Šè¿”ã™
  - 1ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§14å›ä»¥ä¸Šã®ãƒ«ãƒ¼ãƒ«é•åãŒç™ºç”Ÿã—ãŸã‚±ãƒ¼ã‚¹ã‚ã‚Š

**å¯¾å‡¦æ³•:**
- Stop hookã§ãƒ«ãƒ¼ãƒ«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’è¡¨ç¤ºï¼ˆZennã®[ãƒ«ãƒ¼ãƒ«å¿˜ã‚Œã‚‹å•é¡Œã®è§£æ±º](https://zenn.dev/kazuph/articles/483d6cf5f3798c)è¨˜äº‹å‚ç…§ï¼‰
- PreToolUseãƒ•ãƒƒã‚¯ã§å±é™ºãªæ“ä½œã‚’äº‹å‰ãƒ–ãƒ­ãƒƒã‚¯
- ãƒ«ãƒ¼ãƒ«ã‚’çŸ­ãæ˜ç¢ºã«è¨˜è¿°ã—ã€é‡è¤‡ã—ã¦å¼·èª¿ã™ã‚‹

#### 1.3.3 `.claudeignore`ãŒæ©Ÿèƒ½ã—ãªã„ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œï¼‰

**å•é¡Œ:** `.claudeignore`ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¦ã‚‚ã€Claude CodeãŒãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã—ã¾ã†ã€‚

- **å ±å‘Š:** [The Registerè¨˜äº‹](https://www.theregister.com/2026/01/28/claude_code_ai_secrets_files/)
- **å½±éŸ¿:** `.env`ãªã©æ©Ÿå¯†æƒ…å ±ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ãŒä¿è­·ã•ã‚Œãªã„
- **ç¾è±¡:**
  ```
  # .claudeignore
  .env
  ```
  ã“ã®ã‚ˆã†ã«è¨­å®šã—ã¦ã‚‚ã€Claude Codeã¯`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’èª­ã¿å–ã‚Œã‚‹ã€‚

**å¯¾å‡¦æ³•ï¼ˆæš«å®šï¼‰:**
- `permissions.deny`ã‚’ä½¿ç”¨ï¼ˆãŸã ã—ã€ãƒ¡ãƒ¢ãƒªãƒ­ãƒ¼ãƒ‰ã¯é˜²ã’ãªã„å¯èƒ½æ€§ã‚ã‚Šï¼‰
- æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå¤–ã«é…ç½®
- PreToolUseãƒ•ãƒƒã‚¯ã§ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ–ãƒ­ãƒƒã‚¯
- **æ ¹æœ¬å¯¾ç­–:** ã“ã®å•é¡ŒãŒä¿®æ­£ã•ã‚Œã‚‹ã¾ã§ã€æ©Ÿå¯†æƒ…å ±ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ç½®ã‹ãªã„

#### 1.3.4 è¨­å®šã®æ§‹æ–‡ã¨æŒ™å‹•ã®å•é¡Œ

**å•é¡Œ:** è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹æ–‡ã‚„æŒ™å‹•ã«è¤‡æ•°ã®å•é¡ŒãŒã‚ã‚‹ã€‚

1. **çµ¶å¯¾ãƒ‘ã‚¹ã®æ§‹æ–‡**
   - Linux/macOSã§ã¯`/`ã§å§‹ã¾ã‚‹ã¯ãšã ãŒã€Claude Codeã§ã¯`//`ãŒå¿…è¦
   - ä¾‹: `//home/user/project`ï¼ˆ`/home/user/project`ã§ã¯ãªã„ï¼‰

2. **`@`ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§æ§‹æ–‡**
   - settings.jsonã§ã®`@import`æ§‹æ–‡ã«å•é¡Œå ±å‘Šã‚ã‚Š

3. **`permissions.deny`ã®åˆ¶é™**
   - ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ¡ãƒ¢ãƒªã«ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã¯é˜²ã’ãªã„å¯èƒ½æ€§
   - ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã®ã¿ãƒ–ãƒ­ãƒƒã‚¯

**å¯¾å‡¦æ³•:**
- çµ¶å¯¾ãƒ‘ã‚¹ã¯`//`ã§å§‹ã‚ã‚‹
- `@import`æ§‹æ–‡ã¯æ…é‡ã«ãƒ†ã‚¹ãƒˆã™ã‚‹
- permissions.denyã¯ã€Œå®Ÿè¡Œé˜²æ­¢ã€ã¨ç†è§£ã—ã€ã€Œèª­ã¿è¾¼ã¿é˜²æ­¢ã€ã«ã¯åˆ¥ã®æ‰‹æ®µã‚’ä½¿ã†

#### 1.3.5 å“è³ªåŠ£åŒ–ï¼ˆ2026å¹´1æœˆä¸‹æ—¬ä»¥é™ï¼‰

**å•é¡Œ:** 2026å¹´1æœˆ26æ—¥ä»¥é™ã€Claude Codeã®å¿œç­”å“è³ªãŒä½ä¸‹ã—ãŸå ±å‘Šã‚ã‚Šã€‚

- **GitHubã‚¤ã‚·ãƒ¥ãƒ¼:** [#21431](https://github.com/anthropics/claude-code/issues/21431)
- **ç¾è±¡:**
  - å•é¡Œã‚’æ·±ãè€ƒãˆãšã«è¤‡æ•°ã®å£Šã‚ŒãŸè©¦è¡Œã‚’ç¹°ã‚Šè¿”ã™
  - æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ãŒæµ…ããªã£ãŸ

**å¯¾å‡¦æ³•:**
- ã‚ˆã‚Šæ˜ç¢ºã§è©³ç´°ãªæŒ‡ç¤ºã‚’ä¸ãˆã‚‹
- æ®µéšçš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æŒ‡ç¤ºã™ã‚‹
- è¨ˆç”»ãƒ¢ãƒ¼ãƒ‰ï¼ˆ`--permission-mode plan`ï¼‰ã‚’æ´»ç”¨

#### 1.3.6 å®Ÿè·µèª²é¡Œã¸ã®å½±éŸ¿

ã“ã‚Œã‚‰ã®ä¸å…·åˆã‚’è¸ã¾ãˆã€ãƒ•ã‚§ãƒ¼ã‚º1ã®å®Ÿè·µèª²é¡Œã§ã¯ï¼š

1. **CLAUDE.mdæœ€é©åŒ–æ™‚:**
   - ãƒ«ãƒ¼ãƒ«ãŒç„¡è¦–ã•ã‚Œã‚‹å‰æã§ã€é‡è¦ãªãƒ«ãƒ¼ãƒ«ã¯çŸ­ãæ˜ç¢ºã«è¨˜è¿°
   - ãƒ•ãƒƒã‚¯ä½µç”¨ã‚’æ¤œè¨

2. **`.claude/rules/`ä½œæˆæ™‚:**
   - path-basedãƒ«ãƒ¼ãƒ«ã¯Writeæ“ä½œã§æ©Ÿèƒ½ã—ãªã„ã“ã¨ã‚’èªè­˜
   - ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆè¦ç´„ã¯CLAUDE.mdã«ã‚‚è¨˜è¼‰ã™ã‚‹ã‹ã€PostToolUseãƒ•ãƒƒã‚¯ã§å¯¾å‡¦

3. **`.claudeignore`ã®ä½¿ç”¨:**
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šé‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ignoreã«é ¼ã‚‰ãšç‰©ç†çš„ã«åˆ†é›¢
   - `.env`ãªã©ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–ã§ç®¡ç†

4. **æ¤œè¨¼æ™‚ã®æ³¨æ„:**
   - ãƒ«ãƒ¼ãƒ«ãŒé©ç”¨ã•ã‚Œãªã„å ´åˆã€ä¸å…·åˆã®å¯èƒ½æ€§ã‚’è€ƒæ…®
   - ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã®å®Ÿè£…ã‚’å­¦ç¿’ã®ä¸€ç’°ã¨ã™ã‚‹

---

## ãƒ•ã‚§ãƒ¼ã‚º2: Hooksã®é«˜åº¦ãªæ´»ç”¨ï¼ˆ1.5-2æ—¥ï¼‰

> æ—¢ã«hooksçµŒé¨“ãŒã‚ã‚‹ãŸã‚ã€2025/9ä»¥é™ã«è¿½åŠ ã•ã‚ŒãŸæ–°æ©Ÿèƒ½ã«æ³¨åŠ›

### 2.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [Hooks Guide](https://code.claude.com/docs/en/hooks-guide) â€” Hooksã®æ¦‚è¦ã€è¨­å®šæ–¹æ³•ã€å®Ÿè·µä¾‹
- [Hooks Reference](https://code.claude.com/docs/en/hooks) â€” å…¨12ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã€3ç¨®ã®ãƒ•ãƒƒã‚¯ã‚¿ã‚¤ãƒ—ã€matcherã€asyncã€å‡ºåŠ›JSONä»•æ§˜

**æ—¥æœ¬èªå‚è€ƒãƒªã‚½ãƒ¼ã‚¹:**
- [Claude Codeã®ã€Œã™ããƒ«ãƒ¼ãƒ«å¿˜ã‚Œã‚‹å•é¡Œã€ã‚’Hooksã§è§£æ±ºã™ã‚‹](https://zenn.dev/kazuph/articles/483d6cf5f3798c) â€” Stop Hookã§ãƒ«ãƒ¼ãƒ«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å®Ÿè£…ã™ã‚‹å®Ÿè·µä¾‹
- [ã€ã‚³ãƒ”ãƒšOKã€‘Claude Codeã®ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ãƒ»å±é™ºã‚³ãƒãƒ³ãƒ‰ã‚’é˜²æ­¢ã™ã‚‹Hooksã®ä½¿ã„æ–¹](https://zenn.dev/tmasuyama1114/articles/claude_code_hooks_guard_bash_command) â€” PreToolUseã§ã®å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å®Ÿè£…

### 2.1 ãƒ•ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§

**å…¨ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæº–æ‹ ï¼‰:**

| ã‚¤ãƒ™ãƒ³ãƒˆ | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ç”¨é€” |
|---------|--------------|------|
| `SessionStart` | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹/å†é–‹æ™‚ | ç’°å¢ƒå¤‰æ•°è¨­å®šã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥ |
| `UserPromptSubmit` | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡å¾Œã€Claudeå‡¦ç†å‰ | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ¤œè¨¼ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ  |
| `PreToolUse` | ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œå‰ | ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã®ãƒ–ãƒ­ãƒƒã‚¯/è¨±å¯ |
| `PermissionRequest` | è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºæ™‚ | è‡ªå‹•è¨±å¯/æ‹’å¦ |
| `PostToolUse` | ãƒ„ãƒ¼ãƒ«æˆåŠŸå¾Œ | çµæœæ¤œè¨¼ã€è¿½åŠ å‡¦ç† |
| `PostToolUseFailure` | ãƒ„ãƒ¼ãƒ«å¤±æ•—å¾Œ | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã€ã‚¢ãƒ©ãƒ¼ãƒˆ |
| `Notification` | é€šçŸ¥é€ä¿¡æ™‚ | ã‚«ã‚¹ã‚¿ãƒ é€šçŸ¥ |
| `SubagentStart` | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•æ™‚ | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥ |
| `SubagentStop` | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ‚äº†æ™‚ | çµæœæ¤œè¨¼ |
| `Stop` | Claudeå¿œç­”å®Œäº†æ™‚ | å®Œäº†é€šçŸ¥ã€è¿½åŠ ã‚¿ã‚¹ã‚¯ |
| `PreCompact` | ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³å‰ | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿å­˜ |
| `SessionEnd` | ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ | ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€ãƒ­ã‚°ä¿å­˜ |

**SessionStartã®matcherå€¤:**
| matcher | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|---------|--------------|
| `startup` | æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ |
| `resume` | `--resume`ã€`--continue`ã€`/resume`ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³å†é–‹ |
| `clear` | `/clear`å®Ÿè¡Œå¾Œ |
| `compact` | è‡ªå‹•/æ‰‹å‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³å¾Œ |

> **CHANGELOGæƒ…å ±:** `--init`ã€`--init-only`ã€`--maintenance`ãƒ•ãƒ©ã‚°ã§`Setup`ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹ã¨ã®è¨˜è¼‰ã‚ã‚Šï¼ˆhooks referenceã«ã¯æœªæ²è¼‰ã€è¦ç¢ºèªï¼‰ã€‚

### 2.2 ãƒ•ãƒƒã‚¯ã®ç¨®é¡ï¼ˆé‡è¦ãªæ–°æ©Ÿèƒ½ï¼‰

**command hooks** - å¾“æ¥ã®ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
```json
{
  "type": "command",
  "command": "./scripts/format.sh"
}
```

**prompt hooks** - LLMã«ã‚ˆã‚‹è©•ä¾¡ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
```json
{
  "type": "prompt",
  "prompt": "Evaluate if Claude should stop: $ARGUMENTS. Check if all tasks are complete.",
  "timeout": 30
}
```

**agent hooks** - ãƒ„ãƒ¼ãƒ«ä½¿ç”¨å¯èƒ½ãªæ¤œè¨¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆæ–°æ©Ÿèƒ½ï¼‰
```json
{
  "type": "agent",
  "prompt": "Verify that all unit tests pass. Run the test suite and check the results. $ARGUMENTS",
  "timeout": 120
}
```

### 2.3 SessionStartã§ã®ç’°å¢ƒå¤‰æ•°æ°¸ç¶šåŒ–

**`CLAUDE_ENV_FILE`ã®æ´»ç”¨:**

> **é‡è¦:** `CLAUDE_ENV_FILE`ã¯**SessionStart hookã§ã®ã¿**åˆ©ç”¨å¯èƒ½ã€‚ä»–ã®hookã§ã¯ä½¿ç”¨ä¸å¯ã€‚

```bash
#!/bin/bash
# ~/.claude/hooks/session-setup.sh

if [ -n "$CLAUDE_ENV_FILE" ]; then
  echo 'export NODE_ENV=development' >> "$CLAUDE_ENV_FILE"
  echo 'export DEBUG=true' >> "$CLAUDE_ENV_FILE"
fi
exit 0
```

### 2.4 async hooksï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œï¼‰

> **é‡è¦:** `async: true`ã¯**command hookã®ã¿**ã«é©ç”¨å¯èƒ½ã€‚prompt hookã‚„agent hookã§ã¯ä½¿ç”¨ä¸å¯ã€‚

```json
{
  "type": "command",
  "command": "./scripts/run-tests.sh",
  "async": true,
  "timeout": 300
}
```

- Claudeã‚’ãƒ–ãƒ­ãƒƒã‚¯ã›ãšã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œ
- å®Œäº†æ™‚ã®çµæœã¯æ¬¡ã®ä¼šè©±ã‚¿ãƒ¼ãƒ³ã§Claudeã«é€šçŸ¥
- `decision`ã‚„`permissionDecision`ãªã©ã®åˆ¶å¾¡ã¯åŠ¹æœãªã—ï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯æ—¢ã«å®Œäº†æ¸ˆã¿ï¼‰

### 2.5 å®Ÿè·µèª²é¡Œ

**ãªãœã‚„ã‚‹ã®ã‹:**

Hooksã¯ã€ŒClaudeã®è¡Œå‹•ã«å¯¾ã™ã‚‹ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã¨è‡ªå‹•åŒ–ã€ã§ã™ã€‚æ‰‹å‹•ã§æ¯å›è¡Œã£ã¦ã„ã‚‹ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã§ãã¾ã™ï¼š
- **Stopé€šçŸ¥**ï¼šé•·æ™‚é–“ã‚¿ã‚¹ã‚¯ã®å®Œäº†ã‚’Macé€šçŸ¥ã§çŸ¥ã‚‹ â†’ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’è¦‹å¼µã‚‹å¿…è¦ãŒãªããªã‚‹
- **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**ï¼šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†å¾Œã«è‡ªå‹•ã§prettier/ESLintã‚’å®Ÿè¡Œ â†’ æ‰‹å‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ‰‹é–“ã‚’çœã
- **å®Œäº†æ¤œè¨¼**ï¼šprompt hookã§ã‚¿ã‚¹ã‚¯å®Œäº†åº¦ã‚’LLMãŒåˆ¤å®š â†’ ã€Œã¾ã çµ‚ã‚ã£ã¦ãªã„ã®ã«å®Œäº†ã—ãŸã€å•é¡Œã‚’é˜²ã
- **å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯**ï¼š`rm -rf`ç­‰ã‚’PreToolUseã§äº‹å‰ã«æ­¢ã‚ã‚‹ â†’ äº‹æ•…ã‚’æœªç„¶ã«é˜²ã

å„ãƒ•ãƒƒã‚¯ã‚’1ã¤ãšã¤ä½œã‚ŠãªãŒã‚‰ã€Hooksã®ä»•çµ„ã¿ã‚’ä½“é¨“çš„ã«ç†è§£ã—ã¦ã„ãã¾ã™ã€‚

1. **Macé€šçŸ¥ãƒ•ãƒƒã‚¯ï¼ˆStopï¼‰**
```bash
#!/bin/bash
# ~/.claude/hooks/notify-stop.sh
osascript -e 'display notification "Claude has finished" with title "Claude Code" sound name "Glass"'
exit 0
```

2. **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ•ãƒƒã‚¯ï¼ˆPostToolUseï¼‰** - Ruffã§è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"$CLAUDE_PROJECT_DIR/app\" && uv run ruff format --quiet"
          }
        ]
      }
    ]
  }
}
```

3. **prompt hookã§ã®Stopæ¤œè¨¼**
```json
{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Analyze if all user tasks are complete: $ARGUMENTS. Respond with {\"ok\": true} or {\"ok\": false, \"reason\": \"...\"}",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
```

4. **å±é™ºãªã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆPreToolUseï¼‰**

> **exit codeã®ä½¿ã„åˆ†ã‘:**
> - `exit 0`: æˆåŠŸã€‚stdoutã®JSONãŒå‡¦ç†ã•ã‚Œã‚‹
> - `exit 2`: ãƒ–ãƒ­ãƒƒã‚¯ã€‚stdoutã¯**ç„¡è¦–**ã•ã‚Œã€stderrãŒã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦Claudeã«è¿”ã•ã‚Œã‚‹

```bash
#!/bin/bash
# ~/.claude/hooks/block-dangerous.sh
INPUT=$(cat)
COMMAND=$(echo "$INPUT" | jq -r '.tool_input.command // empty')

if echo "$COMMAND" | grep -qE 'rm -rf|git push --force'; then
  # exit 2æ™‚ã¯stderrã«ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚­ã‚¹ãƒˆã‚’å‡ºåŠ›ï¼ˆJSONã¯ä¸è¦ï¼‰
  echo "Dangerous command blocked: $COMMAND" >&2
  exit 2
fi
exit 0
```

**exit 0ã§JSONåˆ¶å¾¡ã™ã‚‹å ´åˆï¼ˆå…¬å¼hooks referenceæº–æ‹ ï¼‰:**

> **Note:** PreToolUseã¯`hookSpecificOutput`ã§`permissionDecision`ï¼ˆallow/deny/askï¼‰ã‚’ä½¿ç”¨ã€‚
> ã“ã‚Œã¯PreToolUseå°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã€PermissionRequestå‘ã‘ã§ã¯ãªã„ã€‚

```bash
#!/bin/bash
INPUT=$(cat)
COMMAND=$(echo "$INPUT" | jq -r '.tool_input.command // empty')

if echo "$COMMAND" | grep -qE 'rm -rf'; then
  # exit 0ã§JSONã‚’å‡ºåŠ›ã—ã¦åˆ¶å¾¡
  jq -n '{
    hookSpecificOutput: {
      hookEventName: "PreToolUse",
      permissionDecision: "deny",
      permissionDecisionReason: "Destructive command blocked"
    }
  }'
else
  exit 0
fi
```

**PreToolUseã®permissionDecisionå€¤:**
| å€¤ | åŠ¹æœ |
|----|------|
| `allow` | è¨±å¯ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¦ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚’è¨±å¯ |
| `deny` | ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‚’ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆç†ç”±ã‚’Claudeã«è¡¨ç¤ºï¼‰ |
| `ask` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’æ±‚ã‚ã‚‹ |

**æ¤œè¨¼:**
- Stopé€šçŸ¥: Claudeã«ã‚¿ã‚¹ã‚¯ã‚’ä¾é ¼ã—ã€å®Œäº†æ™‚ã«é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: Pythonãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã•ã›ã€Ruff formatãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚„ã‚¯ã‚©ãƒ¼ãƒˆã®å¤‰æ›ã§åˆ¤æ–­ï¼‰
- prompt hook: ä¸å®Œå…¨ãªã‚¿ã‚¹ã‚¯æŒ‡ç¤ºã§ClaudeãŒã€Œã¾ã çµ‚ã‚ã£ã¦ã„ãªã„ã€ã¨åˆ¤å®šã™ã‚‹ã‹ç¢ºèª
- å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯: Claudeã« `rm -rf /tmp/test` ã‚’å®Ÿè¡Œã•ã›ã‚ˆã†ã¨ã—ã€ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ãƒ•ã‚§ãƒ¼ã‚º3: Skills & Subagentsï¼ˆ2-3æ—¥ï¼‰

### 3.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [Skills](https://code.claude.com/docs/en/skills) â€” SKILL.mdã®æ§‹é€ ã€ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã€å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥ã€é…ç½®å ´æ‰€
- [Sub-agents](https://code.claude.com/docs/en/sub-agents) â€” ãƒ“ãƒ«ãƒˆã‚¤ãƒ³/ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€frontmatterè¨­å®šã€CLIãƒ•ãƒ©ã‚°

**æ—¥æœ¬èªå‚è€ƒãƒªã‚½ãƒ¼ã‚¹:**
- [æ¿«ç«‹ã™ã‚‹Claude Codeã®æ©Ÿèƒ½ã®ä½¿ã„åˆ†ã‘](https://zenn.dev/notahotel/articles/a175aa95629d0b) â€” Skills/Subagents/Hooks/CLAUDE.mdã®å½¹å‰²åˆ†æ‹…ã‚’ä½“ç³»çš„ã«æ•´ç†
- [Claude Code ã§ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹](https://azukiazusa.dev/blog/create-custom-sub-agent-in-claude-code/) â€” `/agents`ã‹ã‚‰ã®ä½œæˆæ‰‹é †ã¨YAMLãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼æ§‹æˆ

### 3.1 Skills ã‚·ã‚¹ãƒ†ãƒ 

**SKILL.mdã®æ§‹é€ :**
```yaml
---
name: my-skill
description: Skillã®èª¬æ˜ï¼ˆClaudeãŒè‡ªå‹•é¸æŠã«ä½¿ç”¨ï¼‰
disable-model-invocation: true  # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿å‘¼ã³å‡ºã—å¯èƒ½ï¼ˆClaudeãŒè‡ªå‹•å®Ÿè¡Œã—ãªã„ï¼‰
allowed-tools: Read, Grep, Glob  # è¨±å¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãªã—ã§ä½¿ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«ï¼ˆäº‹å‰è¨±å¯ï¼‰
context: fork  # ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§å®Ÿè¡Œ
agent: Explore  # ä½¿ç”¨ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¿ã‚¤ãƒ—
model: sonnet  # ãƒ¢ãƒ‡ãƒ«æŒ‡å®š
hooks:
  PreToolUse:
    - matcher: "Bash"
      hooks:
        - type: command
          command: "./scripts/validate.sh"
---

# Skillæœ¬ä½“ï¼ˆClaudeã¸ã®æŒ‡ç¤ºï¼‰

ã“ã“ã«Skillã®å†…å®¹ã‚’è¨˜è¿°...
```

**Skillãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã®ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:**
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | èª¬æ˜ |
|-----------|------|
| `name` | è¡¨ç¤ºåï¼ˆçœç•¥æ™‚ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåï¼‰ |
| `description` | ç”¨é€”èª¬æ˜ï¼ˆClaudeãŒè‡ªå‹•é¸æŠã«ä½¿ç”¨ï¼‰ |
| `disable-model-invocation` | `true`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿å‘¼ã³å‡ºã—å¯èƒ½ |
| `user-invocable` | `false`ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰éè¡¨ç¤ºï¼ˆClaudeã®ã¿ä½¿ç”¨ï¼‰ |
| `allowed-tools` | è¨±å¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãªã—ã§ä½¿ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ« |
| `context` | `fork`ã§ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦å®Ÿè¡Œ |
| `agent` | ä½¿ç”¨ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆExplore, Planç­‰ï¼‰ |
| `model` | ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«ï¼ˆsonnet, opus, haikuï¼‰ |

**å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥:**
```yaml
---
name: pr-summary
description: PRã®è¦ç´„ã‚’ä½œæˆ
context: fork
---

## PRã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
- PR diff: !`gh pr diff`
- å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«: !`gh pr diff --name-only`

## ã‚¿ã‚¹ã‚¯
ã“ã®PRã‚’è¦ç´„ã—ã¦ãã ã•ã„...
```

**Skillã®ä¿å­˜å ´æ‰€:**
| å ´æ‰€ | ç”¨é€” |
|------|------|
| `~/.claude/skills/<name>/SKILL.md` | å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€š |
| `.claude/skills/<name>/SKILL.md` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ |

### 3.2 ã‚«ã‚¹ã‚¿ãƒ ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

**.claude/agents/code-reviewer.md:**
```yaml
---
name: code-reviewer
description: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å°‚é–€ã€‚ã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œã«ç©æ¥µçš„ã«ä½¿ç”¨ã€‚
tools: Read, Grep, Glob, Bash
model: sonnet
permissionMode: dontAsk
---

ã‚ãªãŸã¯ã‚·ãƒ‹ã‚¢ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã§ã™ã€‚

ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã®è¦³ç‚¹:
1. ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§
2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
4. ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

å„ªå…ˆåº¦åˆ¥ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’æ•´ç†:
- Criticalï¼ˆå¿…é ˆä¿®æ­£ï¼‰
- Warningï¼ˆæ¨å¥¨ä¿®æ­£ï¼‰
- Suggestionï¼ˆææ¡ˆï¼‰
```

**CLIã§ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæŒ‡å®š:**
```bash
claude --agents '{
  "quick-reviewer": {
    "description": "é«˜é€Ÿãƒ¬ãƒ“ãƒ¥ãƒ¼",
    "prompt": "é‡è¦ãªå•é¡Œã®ã¿å ±å‘Š",
    "tools": ["Read", "Grep"],
    "model": "haiku"
  }
}'
```

### 3.3 çµ„ã¿è¾¼ã¿ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

**ä¸»è¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:**
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | ãƒ¢ãƒ‡ãƒ« | ç”¨é€” |
|------------|-------|------|
| Explore | Haiku | ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ¢ç´¢ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ã€é«˜é€Ÿï¼‰ |
| Plan | ç¶™æ‰¿ | è¨ˆç”»ãƒ¢ãƒ¼ãƒ‰ã§ã®èª¿æŸ»ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰ |
| general-purpose | ç¶™æ‰¿ | è¤‡é›‘ãªå¤šæ®µéšã‚¿ã‚¹ã‚¯ï¼ˆå…¨ãƒ„ãƒ¼ãƒ«ä½¿ç”¨å¯ï¼‰ |

**ãã®ä»–ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ:**
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | ãƒ¢ãƒ‡ãƒ« | ç”¨é€” |
|------------|-------|------|
| Bash | ç¶™æ‰¿ | ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ¥ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§å®Ÿè¡Œ |
| statusline-setup | Sonnet | `/statusline`ã§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³è¨­å®š |
| claude-code-guide | Haiku | Claude Codeã®æ©Ÿèƒ½ã«ã¤ã„ã¦ã®è³ªå•å¿œç­” |

**ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç„¡åŠ¹åŒ–:**
```json
{
  "permissions": {
    "deny": ["Task(Explore)", "Task(my-custom-agent)"]
  }
}
```

### 3.4 å®Ÿè·µèª²é¡Œ

**ãªãœã‚„ã‚‹ã®ã‹:**

æ—¥å¸¸ã®é–‹ç™ºä½œæ¥­ã«ã¯ã€Œä½•åº¦ã‚‚ç¹°ã‚Šè¿”ã™ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãŒã‚ã‚Šã¾ã™ï¼š
- ã‚³ãƒ¼ãƒ‰å¤‰æ›´å¾Œã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ â†’ æ¯å›åŒã˜ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ‰“ã¤ã®ã¯éåŠ¹ç‡
- ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‚‰ãƒ‡ãƒãƒƒã‚°ã™ã‚‹ â†’ æ¯å›ã€Œåˆ†æã—ã¦ã€ã¨æŒ‡ç¤ºã™ã‚‹ã®ãŒæ‰‹é–“
- ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦çµæœã‚’ç¢ºèªã™ã‚‹ â†’ æ‰‹é †ãŒæ±ºã¾ã£ã¦ã„ã‚‹ã®ã«æ¯å›èª¬æ˜ã™ã‚‹

Skillsï¼ˆ`/review`ã®ã‚ˆã†ãªã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ï¼‰ã¨ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚‹ã“ã¨ã§ã€ã“ã‚Œã‚‰ã®å®šå‹ä½œæ¥­ã‚’ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€`context: fork`ã§ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦å®Ÿè¡Œã™ã‚Œã°ã€ãƒ¡ã‚¤ãƒ³ã®ä¼šè©±ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¶ˆè²»ã›ãšã«å‡¦ç†ã‚’å§”è­²ã§ãã¾ã™ã€‚

1. **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼Skillï¼ˆ/reviewï¼‰**
```yaml
---
name: review
description: ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
disable-model-invocation: true
context: fork
agent: Explore
---

!`git diff`

ä¸Šè¨˜ã®å¤‰æ›´ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã€å•é¡Œç‚¹ã‚’å ±å‘Šã—ã¦ãã ã•ã„ã€‚
```

2. **ãƒ‡ãƒãƒƒã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**
```yaml
---
name: debugger
description: ã‚¨ãƒ©ãƒ¼è§£æã¨ãƒ‡ãƒãƒƒã‚°
tools: Read, Edit, Bash, Grep, Glob
model: sonnet
---

ã‚¨ãƒ©ãƒ¼ã®æ ¹æœ¬åŸå› ã‚’åˆ†æã—ã€ä¿®æ­£ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚
```

3. **ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒSkill**
```yaml
---
name: test
description: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦çµæœã‚’å ±å‘Š
disable-model-invocation: true
allowed-tools: Bash(uv run pytest *)
---

ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè¡Œã—ã€å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã®åŸå› ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚
```

**æ¤œè¨¼:**
- `/review` ã‚’å®Ÿè¡Œã—ã€SkillãŒèªè­˜ã•ã‚Œã¦å·®åˆ†ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ `/agents` ã‚³ãƒãƒ³ãƒ‰ã§è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- `context: fork` ã®SkillãŒã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’æ¶ˆè²»ã—ãªã„ã“ã¨ã‚’ç¢ºèª

---

## ãƒ•ã‚§ãƒ¼ã‚º4: MCPçµ±åˆï¼ˆ2æ—¥ï¼‰

### 4.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [MCP](https://code.claude.com/docs/en/mcp) â€” ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã€ã‚¹ã‚³ãƒ¼ãƒ—ã€OAuthèªè¨¼ã€Tool Searchã€MCP Resources/Promptsã€`claude mcp serve`

**æ—¥æœ¬èªå‚è€ƒãƒªã‚½ãƒ¼ã‚¹:**
- [Claude Codeã‹ã‚‰MCPã‚’åˆ©ç”¨ã™ã‚‹ã€Claude Codeã‚’MCPã¨ã—ã¦åˆ©ç”¨ã™ã‚‹](https://qiita.com/nokonoko_1203/items/99b9965d1eb63476b18c) â€” MCPã®åŒæ–¹å‘é€£æºã‚’è§£èª¬
- [Claude Codeã§MCPã‚’å¿«é©ã«ä½¿ã†è¨­å®šè¡“](https://zenn.dev/kuxu/articles/c832ccf26b7cce) â€” `--mcp-config`ã‚„Tool Searchã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç¯€ç´„ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### 4.1 MCPã‚µãƒ¼ãƒãƒ¼ã®è¿½åŠ 

**HTTPãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆï¼ˆæ¨å¥¨ï¼‰:**
```bash
claude mcp add --transport http notion https://mcp.notion.com/mcp
```

**SSEãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆï¼ˆâš ï¸ éæ¨å¥¨ï¼‰:**
> **Warning:** SSE (Server-Sent Events) ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã¯éæ¨å¥¨ã€‚å¯èƒ½ãªé™ã‚ŠHTTPã‚’ä½¿ç”¨ã€‚

```bash
claude mcp add --transport sse sentry https://mcp.sentry.dev/mcp
```

**STDIOãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆ:**
```bash
claude mcp add --transport stdio --env GITHUB_TOKEN=$GITHUB_TOKEN github \
  -- npx -y @modelcontextprotocol/server-github
```

### 4.2 ã‚¹ã‚³ãƒ¼ãƒ—

| ã‚¹ã‚³ãƒ¼ãƒ— | ä¿å­˜å ´æ‰€ | ç”¨é€” | å…±æœ‰ |
|---------|---------|------|------|
| `local` | `~/.claude.json`ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹ã”ã¨ï¼‰ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ãƒ»å€‹äººç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ | No |
| `project` | `.mcp.json` | ãƒãƒ¼ãƒ å…±æœ‰ï¼ˆgitç®¡ç†ï¼‰ | Yes |
| `user` | `~/.claude.json`ï¼ˆmcpServersãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰ | å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€š | No |

```bash
# ã‚¹ã‚³ãƒ¼ãƒ—æŒ‡å®šä¾‹
claude mcp add --scope local notion --transport http https://mcp.notion.com/mcp   # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
claude mcp add --scope project sentry --transport http https://mcp.sentry.dev/mcp  # ãƒãƒ¼ãƒ å…±æœ‰
claude mcp add --scope user github --transport http https://api.githubcopilot.com/mcp/  # å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```

> **Note:** project scopeã®`.mcp.json`ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€Claude Codeã¯åˆå›ä½¿ç”¨æ™‚ã«æ‰¿èªã‚’æ±‚ã‚ã‚‹ã€‚

### 4.3 Claude Codeè‡ªä½“ã‚’MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦å…¬é–‹

```bash
claude mcp serve
```

**Claude Desktopã‹ã‚‰æ¥ç¶š:**
```json
{
  "mcpServers": {
    "claude-code": {
      "type": "stdio",
      "command": "claude",
      "args": ["mcp", "serve"]
    }
  }
}
```

### 4.4 å®Ÿç”¨çš„ãªMCPã‚µãƒ¼ãƒãƒ¼

1. **GitHub MCP** - PR/Issueæ“ä½œ
```bash
claude mcp add --transport http github https://api.githubcopilot.com/mcp/
```

2. **Sentry MCP** - ã‚¨ãƒ©ãƒ¼ç›£è¦–
```bash
claude mcp add --transport http sentry https://mcp.sentry.dev/mcp
```

3. **Database MCP** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª
```bash
claude mcp add --transport stdio db -- npx -y @bytebase/dbhub \
  --dsn "postgresql://user:pass@host:5432/db"
```

### 4.5 å®Ÿè·µèª²é¡Œ

**ãªãœã‚„ã‚‹ã®ã‹:**

MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã†ã¨ã€Claude CodeãŒå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š
- **GitHub MCP**ï¼šãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ã‹ãšã«PRä½œæˆãƒ»Issueç®¡ç† â†’ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¤ãƒƒãƒã‚’æ¸›ã‚‰ã™
- **Sentry MCP**ï¼šã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’ClaudeãŒç›´æ¥å–å¾—ã—ã¦åˆ†æ â†’ ã€Œã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ã‚³ãƒ”ãƒšã—ã¦ã€ã®æ‰‹é–“ã‚’çœã
- **`.mcp.json`ã§ãƒãƒ¼ãƒ å…±æœ‰**ï¼šæ–°ãƒ¡ãƒ³ãƒãƒ¼ãŒMCPã®è¨­å®šã‚’æ‰‹å‹•ã§ã™ã‚‹å¿…è¦ãŒãªããªã‚‹

ã“ã®èª²é¡Œã§ã¯GitHub MCPã‚’å®Ÿéš›ã«è¨­å®šã—ã€ClaudeãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«å†…ã§PRæ“ä½œã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

1. GitHub MCPã‚’è¨­å®šã—ã¦PRæ“ä½œã‚’è©¦ã™
2. `.mcp.json`ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’è¨­å®š
3. `/mcp`ã‚³ãƒãƒ³ãƒ‰ã§æ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèª

**æ¤œè¨¼:**
- `/mcp` ã§MCPã‚µãƒ¼ãƒãƒ¼ã®æ¥ç¶šçŠ¶æ…‹ãŒã€Œconnectedã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- MCPãƒ„ãƒ¼ãƒ«ï¼ˆä¾‹: GitHub MCPã®PRä¸€è¦§å–å¾—ï¼‰ã‚’å®Ÿéš›ã«å‘¼ã³å‡ºã—ã¦çµæœãŒè¿”ã‚‹ã“ã¨ã‚’ç¢ºèª
- `.mcp.json` ã§project scopeã«è¿½åŠ ã—ãŸã‚µãƒ¼ãƒãƒ¼ãŒæ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§æ‰¿èªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒå‡ºã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼ˆ2æ—¥ï¼‰

### 5.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [Plugins](https://code.claude.com/docs/en/plugins) â€” ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ¦‚è¦ã¨ä½¿ã„æ–¹
- [Plugins Reference](https://code.claude.com/docs/en/plugins-reference) â€” plugin.jsonãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®è©³ç´°ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

**æ—¥æœ¬èªå‚è€ƒãƒªã‚½ãƒ¼ã‚¹:**
- [ç¶šãƒ»Claude Codeå…¬å¼Pluginã®ã™ã™ã‚+Î±](https://zenn.dev/modokkin/articles/zenn-2026-01-06-claude-code-plugins-update) â€” 2026å¹´1æœˆæ™‚ç‚¹ã®æœ€æ–°æƒ…å ±ã€13å€‹ã®å…¬å¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ´»ç”¨æ³•
- [Claude Code Plugin ã‚’é–‹ç™ºã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ plugin-dev ã§è‡ªä½œãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã®ãƒãƒ¼ãƒ‰ãƒ«ã‚’ä¸‹ã’ã‚‹](https://zenn.dev/ashita_team/articles/claude-code-plugin-dev) â€” å…¬å¼plugin-devã‚’ä½¿ã£ãŸå¯¾è©±å½¢å¼ã§ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œæˆ

### 5.1 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç®¡ç†

**CLIã‚³ãƒãƒ³ãƒ‰:**
```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹æŒ‡å®šã‚ã‚Š/ãªã—ï¼‰
claude plugin install formatter --scope user
claude plugin install formatter@my-marketplace --scope project

# ãƒªã‚¹ãƒˆè¡¨ç¤º
claude plugin list

# æœ‰åŠ¹åŒ–/ç„¡åŠ¹åŒ–
claude plugin enable formatter
claude plugin disable formatter

# ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚¨ã‚¤ãƒªã‚¢ã‚¹: remove, rmï¼‰
claude plugin uninstall formatter

# æ›´æ–°
claude plugin update formatter --scope user
```

> **Note:** `/plugin`ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ¢ç´¢ãƒ»ç®¡ç†å¯èƒ½ã€‚

**ã‚¹ã‚³ãƒ¼ãƒ—:**
| ã‚¹ã‚³ãƒ¼ãƒ— | ç”¨é€” |
|---------|------|
| user | å€‹äººç”¨ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| project | ãƒãƒ¼ãƒ å…±æœ‰ï¼ˆ.claude/settings.jsonï¼‰ |
| local | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ãƒ»gitignore |

### 5.2 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ§‹é€ 

```
my-plugin/
â”œâ”€â”€ .claude-plugin/
â”‚   â””â”€â”€ plugin.json      # ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”œâ”€â”€ skills/              # Skills
â”‚   â””â”€â”€ my-skill/
â”‚       â””â”€â”€ SKILL.md
â”œâ”€â”€ agents/              # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â””â”€â”€ my-agent.md
â”œâ”€â”€ hooks/               # Hooks
â”‚   â””â”€â”€ hooks.json
â”œâ”€â”€ .mcp.json            # MCPã‚µãƒ¼ãƒãƒ¼
â””â”€â”€ scripts/             # ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```

**plugin.json:**
```json
{
  "name": "my-plugin",
  "version": "1.0.0",
  "description": "ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®èª¬æ˜",
  "author": {
    "name": "Your Name"
  },
  "skills": "./skills/",
  "agents": "./agents/",
  "hooks": "./hooks/hooks.json",
  "mcpServers": "./.mcp.json"
}
```

### 5.3 LSPãƒ—ãƒ©ã‚°ã‚¤ãƒ³

LSPãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚³ãƒ¼ãƒ‰è£œå®Œã¨å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—ã‚’æœ‰åŠ¹åŒ–:

**.lsp.json:**
```json
{
  "typescript": {
    "command": "typescript-language-server",
    "args": ["--stdio"],
    "extensionToLanguage": {
      ".ts": "typescript",
      ".tsx": "typescriptreact"
    }
  }
}
```

### 5.4 å®Ÿè·µèª²é¡Œ

**ãªãœã‚„ã‚‹ã®ã‹:**

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€Skillsãƒ»Hooksãƒ»ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»MCPã‚µãƒ¼ãƒãƒ¼ã‚’1ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¾ã¨ã‚ã‚‹ä»•çµ„ã¿ã§ã™ï¼š
- **é…å¸ƒã¨å†åˆ©ç”¨**ï¼šãƒãƒ¼ãƒ ã‚„å€‹äººã®è¨­å®šã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ã¦ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- **ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹**ï¼šã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒä½œã£ãŸä¾¿åˆ©ãªè¨­å®šã‚’`claude plugin install`ã§å³åº§ã«ä½¿ãˆã‚‹
- **ä¸€è²«æ€§**ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¿…è¦ãªClaude Codeè¨­å®šã‚’ä¸¸ã”ã¨gitç®¡ç†

ã“ã®èª²é¡Œã§ã¯ã€ã¾ãšå…¬å¼ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½“é¨“ã—ã¦ã‹ã‚‰ã€è‡ªåˆ†ç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä»Šå¾Œæ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚è¨­å®šã‚’å³åº§ã«å†ç¾ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

1. å…¬å¼ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹ã‹ã‚‰ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ¢ç´¢ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. è‡ªåˆ†ç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆï¼ˆskills + hooksï¼‰
3. `/plugin`ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¢ºèª

**æ¤œè¨¼:**
- `claude plugin list` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®SkillãŒ `/` ã‚³ãƒãƒ³ãƒ‰ã§è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- `claude plugin disable <name>` â†’ `claude plugin enable <name>` ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ãƒ•ã‚§ãƒ¼ã‚º6: é«˜åº¦ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆ2-3æ—¥ï¼‰

### 6.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [Headless Mode](https://code.claude.com/docs/en/headless) â€” `-p`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€Agent SDKã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶™ç¶š
- [GitHub Actions](https://code.claude.com/docs/en/github-actions) â€” GitHub Actionsã§ã®`@claude`ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³çµ±åˆ
- [CLI Reference](https://code.claude.com/docs/en/cli-reference) â€” å…¨CLIãƒ•ãƒ©ã‚°ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

**æ—¥æœ¬èªå‚è€ƒãƒªã‚½ãƒ¼ã‚¹:**
- [Claude Code ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](https://zenn.dev/farstep/articles/claude-code-best-practices) â€” CI/CDã§ã®ãƒ•ã‚¡ãƒ³ã‚¢ã‚¦ãƒˆ/ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ‹ãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è§£èª¬
- [[ç¿»è¨³] Anthropic ãƒãƒƒã‚«ã‚½ãƒ³å„ªå‹è€…ã«ã‚ˆã‚‹ Claude Code å®Œå…¨ã‚¬ã‚¤ãƒ‰ã€å¿œç”¨ç·¨ã€‘](https://zenn.dev/studypocket/articles/claude-code-complete-guide-advanced) â€” ãƒˆãƒ¼ã‚¯ãƒ³ã‚¨ã‚³ãƒãƒŸã‚¯ã‚¹ã€ä¸¦åˆ—åŒ–æˆ¦ç•¥ãªã©é«˜åº¦ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### 6.1 ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆCI/CDçµ±åˆï¼‰

**åŸºæœ¬ä½¿ç”¨:**
```bash
claude -p "å¤±æ•—ã—ã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆã‚’ä¿®æ­£ã—ã¦" --allowedTools "Read,Edit,Bash"
```

**æ§‹é€ åŒ–å‡ºåŠ›:**
```bash
claude -p "List all API endpoints" \
  --output-format json \
  --json-schema '{"type":"object","properties":{"endpoints":{"type":"array","items":{"type":"string"}}}}'
```

**ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°:**
```bash
claude -p "Explain this code" --output-format stream-json --verbose
```

**ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶™ç¶š:**
```bash
# æœ€æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç¶™ç¶šï¼ˆ-c ã¾ãŸã¯ --continueï¼‰
claude -c -p "Continue the review"

# ç‰¹å®šã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†é–‹ï¼ˆ-r ã¾ãŸã¯ --resumeï¼‰
claude -r "$SESSION_ID" -p "Continue"

# ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’å–å¾—ã—ã¦å¾Œã§å†é–‹
session_id=$(claude -p "Start a review" --output-format json | jq -r '.session_id')
claude -r "$session_id" -p "Continue that review"
```

**--allowedToolsã¨--toolsã®é•ã„:**
- `--allowedTools`: è¨±å¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãªã—ã§å®Ÿè¡Œã—ã¦ã‚ˆã„ãƒ„ãƒ¼ãƒ«
- `--tools`: ä½¿ç”¨å¯èƒ½ãªãƒ„ãƒ¼ãƒ«è‡ªä½“ã‚’åˆ¶é™ï¼ˆçœç•¥æ™‚ã¯å…¨ãƒ„ãƒ¼ãƒ«ï¼‰

### 6.2 ä¸¦åˆ—å‡¦ç†ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¨/rewind:**
- `Esc` + `Esc` ã§rewindãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã
- `/rewind`ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚åŒæ§˜
- ä¼šè©±ã®ã¿/ã‚³ãƒ¼ãƒ‰ã®ã¿/ä¸¡æ–¹ã‚’å¾©å…ƒå¯èƒ½

**ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³:**
- `/compact` ã§æ‰‹å‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³
- è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã¯95%ã§ç™ºå‹•ï¼ˆ`CLAUDE_AUTOCOMPACT_PCT_OVERRIDE`ã§å¤‰æ›´å¯èƒ½ï¼‰

### 6.3 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

**/statusline ã¾ãŸã¯ settings.json:**
```json
{
  "statusLine": {
    "type": "command",
    "command": "~/.claude/statusline.sh",
    "padding": 0
  }
}
```

**statusline.sh:**
```bash
#!/bin/bash
input=$(cat)

MODEL=$(echo "$input" | jq -r '.model.display_name')
CURRENT_DIR=$(echo "$input" | jq -r '.workspace.current_dir')
PERCENT_USED=$(echo "$input" | jq -r '.context_window.used_percentage // 0')
COST=$(echo "$input" | jq -r '.cost.total_cost_usd // 0')

# Git branch
GIT_BRANCH=""
if git rev-parse --git-dir > /dev/null 2>&1; then
  BRANCH=$(git branch --show-current 2>/dev/null)
  if [ -n "$BRANCH" ]; then
    GIT_BRANCH=" | ğŸŒ¿ $BRANCH"
  fi
fi

printf "[$MODEL] ğŸ“ ${CURRENT_DIR##*/}$GIT_BRANCH | ğŸ“Š %.0f%% | ğŸ’° \$%.4f" "$PERCENT_USED" "$COST"
```

### 6.4 ç’°å¢ƒçµ±åˆ

**Zellijé€£æº:**
```bash
# æ–°ã—ã„ãƒšã‚¤ãƒ³ã§Claude Code
zellij action new-pane -- claude

# ã‚»ãƒƒã‚·ãƒ§ãƒ³å†é–‹
zellij action new-pane -- claude --resume
```

**yazié€£æºï¼ˆã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ï¼‰:**
```bash
# yazi.tomlã«è¿½åŠ 
[[manager.prepend_keymap]]
on = ["c", "c"]
run = '''shell --interactive 'claude -p "Analyze this file: $1" "$@"' '''
desc = "Claude Codeã§åˆ†æ"
```

### 6.5 å®Ÿè·µèª²é¡Œ

**ãªãœã‚„ã‚‹ã®ã‹:**

ã“ã“ã¾ã§ã«å­¦ã‚“ã å€‹ã€…ã®æ©Ÿèƒ½ã‚’ã€å®Ÿéš›ã®é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«çµ±åˆã—ã¾ã™ï¼š
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³**ï¼šãƒ¢ãƒ‡ãƒ«åãƒ»ã‚³ã‚¹ãƒˆãƒ»Gitæƒ…å ±ã‚’å¸¸æ™‚è¡¨ç¤º â†’ ãƒˆãƒ¼ã‚¯ãƒ³æ¶ˆè²»ã‚’æ„è­˜ã—ãªãŒã‚‰ä½œæ¥­ã§ãã‚‹
- **ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼ˆCI/CDï¼‰**ï¼šGitHub Actionsã‹ã‚‰ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„ä¿®æ­£ã‚’è‡ªå‹•å®Ÿè¡Œ â†’ äººæ‰‹ã‚’ä»‹ã•ãªã„å“è³ªãƒã‚§ãƒƒã‚¯
- **ã‚¿ãƒ¼ãƒŸãƒŠãƒ«é€£æº**ï¼šZellij/tmuxã®ãƒšã‚¤ãƒ³ã§Claudeã‚’ä¸¦åˆ—èµ·å‹• â†’ è¤‡æ•°ã‚¿ã‚¹ã‚¯ã‚’åŒæ™‚é€²è¡Œ

ã“ã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã€ŒClaudeã‚’å‘¼ã³å‡ºã™ â†’ çµæœã‚’å¾…ã¤ â†’ æ¬¡ã®æŒ‡ç¤ºã€ã¨ã„ã†ç›´åˆ—ä½œæ¥­ã‹ã‚‰ã€ã€Œè¤‡æ•°ã®ClaudeãŒä¸¦åˆ—ã§å‹•ãåŠ¹ç‡çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ã¸ç§»è¡Œã§ãã¾ã™ã€‚

1. statusline.shã‚’ä½œæˆã—ã¦Gitæƒ…å ±ã¨ã‚³ã‚¹ãƒˆè¡¨ç¤º
2. GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ä½¿ç”¨
3. Zellij/tmuxã¨ã®é€£æºã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ

**æ¤œè¨¼:**
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã«ãƒ¢ãƒ‡ãƒ«åãƒ»ã‚³ã‚¹ãƒˆãƒ»Git branch ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- `claude -p "echo hello" --output-format json` ã§JSONå‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶™ç¶š: `claude -p "..." --output-format json` ã§session_idå–å¾— â†’ `claude -r $session_id -p "..."` ã§ä¼šè©±ãŒç¶™ç¶šã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ãƒ•ã‚§ãƒ¼ã‚º7: çµ±åˆã¨æœ€é©åŒ–ï¼ˆ1æ—¥ï¼‰

### 7.0 äº‹å‰å­¦ç¿’ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ï¼‰

**å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [Features Overview](https://code.claude.com/docs/en/features-overview) â€” å…¨æ©Ÿèƒ½ã®ä½¿ã„åˆ†ã‘ãƒ»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚³ã‚¹ãƒˆãƒ»çµ„ã¿åˆã‚ã›ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¯”è¼ƒä¸€è¦§

### 7.1 æ—¥å¸¸é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³:**
1. æ–°æ©Ÿèƒ½é–‹å§‹æ™‚: æ–°ã—ã„Gitãƒ–ãƒ©ãƒ³ãƒä½œæˆ
2. è¤‡é›‘ãªã‚¿ã‚¹ã‚¯: Planãƒ¢ãƒ¼ãƒ‰ï¼ˆ`claude --permission-mode plan`ï¼‰ã§èª¿æŸ»
3. å®Ÿè£…ä¸­: ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§è©³ç´°èª¿æŸ»ã‚’å§”è­²
4. å®Œäº†å¾Œ: /reviewã‚¹ã‚­ãƒ«ã§ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
5. ã‚³ãƒŸãƒƒãƒˆå‰: hooksã§è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ»ãƒ†ã‚¹ãƒˆ

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†:**
- `/clear`ã‚’é »ç¹ã«ä½¿ç”¨ï¼ˆæ–°ã‚¿ã‚¹ã‚¯é–‹å§‹æ™‚ï¼‰
- ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§å¤§é‡ã®å‡ºåŠ›ã‚’åˆ†é›¢
- ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã§å®‰å…¨ã«ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯

### 7.2 ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰:**
```bash
claude --debug
```

**ã‚ˆãã‚ã‚‹å•é¡Œ:**

| å•é¡Œ | åŸå›  | è§£æ±ºæ³• |
|------|------|--------|
| ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„ | ç„¡åŠ¹ãªplugin.json | `/plugin validate`ã§æ¤œè¨¼ |
| hooksãŒç™ºç«ã—ãªã„ | ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œä¸å¯ | `chmod +x script.sh` |
| MCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šå¤±æ•— | ãƒ‘ã‚¹/èªè¨¼ã‚¨ãƒ©ãƒ¼ | `claude --debug`ã§ç¢ºèª |
| SkillãŒè¦‹ã¤ã‹ã‚‰ãªã„ | é–“é•ã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | `~/.claude/skills/`ç¢ºèª |

### 7.3 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- CLAUDE.mdã¯100-200è¡Œä»¥å†…
- ä¸è¦ãªMCPã‚µãƒ¼ãƒãƒ¼ã¯åˆ‡æ–­
- `/mcp`ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚³ã‚¹ãƒˆç¢ºèª
- `disable-model-invocation: true`ã§Skillã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚³ã‚¹ãƒˆå‰Šæ¸›

---

## è£œè¶³: 2025å¹´9æœˆä»¥é™ã®ä¸»ãªæ–°æ©Ÿèƒ½

CHANGELOGã«åŸºã¥ãã€å­¦ç¿’è¨ˆç”»ã«å«ã¾ã‚Œã¦ã„ãªã„è¿½åŠ æ©Ÿèƒ½ï¼š

### ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
```bash
# ç’°å¢ƒå¤‰æ•°ã§ç„¡åŠ¹åŒ–å¯èƒ½
CLAUDE_CODE_ENABLE_TASKS=false claude
```
- ä¾å­˜é–¢ä¿‚è¿½è·¡ä»˜ãã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
- TaskCreateã€TaskUpdateã€TaskListãƒ„ãƒ¼ãƒ«

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
```bash
/keybindings  # è¨­å®šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’é–‹ã
```
- ã‚³ãƒ¼ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å¯¾å¿œ
- `~/.claude/keybindings.json`ã§è¨­å®š

### è¨€èªè¨­å®š
```json
{
  "language": "japanese"  // Claudeã®å¿œç­”è¨€èªã‚’è¨­å®šï¼ˆè¨€èªåã‚’ä½¿ç”¨ã€ã‚³ãƒ¼ãƒ‰ã§ã¯ãªã„ï¼‰
}
```
> **Note:** å€¤ã¯è¨€èªã‚³ãƒ¼ãƒ‰ï¼ˆ"ja"ï¼‰ã§ã¯ãªãã€è¨€èªåï¼ˆ"japanese", "spanish", "french"ç­‰ï¼‰ã‚’ä½¿ç”¨ã€‚

### PRãƒªãƒ³ã‚¯æ©Ÿèƒ½
```bash
claude --from-pr  # ç‰¹å®šã®GitHub PRã«ãƒªãƒ³ã‚¯ã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†é–‹
```
- `gh pr create`ã§è‡ªå‹•ãƒªãƒ³ã‚¯
- PRãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼è¡¨ç¤º

### MCPã®æ–°æ©Ÿèƒ½
- **list_changedé€šçŸ¥**: MCPã‚µãƒ¼ãƒãƒ¼ãŒãƒ„ãƒ¼ãƒ«/ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ/ãƒªã‚½ãƒ¼ã‚¹ã‚’å‹•çš„ã«æ›´æ–°å¯èƒ½
- **Tool Search**: MCPãƒ„ãƒ¼ãƒ«ãŒå¤šã„å ´åˆã«è‡ªå‹•æœ‰åŠ¹åŒ–ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®10%è¶…éæ™‚ï¼‰
  ```bash
  ENABLE_TOOL_SEARCH=auto:5 claude  # 5%é–¾å€¤ã§æœ‰åŠ¹åŒ–
  ENABLE_TOOL_SEARCH=false claude   # ç„¡åŠ¹åŒ–
  ```

### ãã®ä»–ã®è¨­å®š
- `spinnerVerbs`: ã‚¹ãƒ”ãƒŠãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
- `showTurnDuration`: ã‚¿ãƒ¼ãƒ³æ‰€è¦æ™‚é–“è¡¨ç¤ºã®åˆ¶å¾¡
- `plansDirectory`: è¨ˆç”»ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜å ´æ‰€æŒ‡å®š
- `respectGitignore`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã®gitignoreè¨­å®šåˆ¶å¾¡

---

## å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Claude Code Docs](https://code.claude.com/docs/en/)
- [CHANGELOG](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md)
- [ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹](https://code.claude.com/docs/llms.txt)

### ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒªã‚½ãƒ¼ã‚¹
- [awesome-claude-code](https://github.com/hesreallyhim/awesome-claude-code) - Skills, Hooks, ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é›†
- [claude-code-hooks-mastery](https://github.com/disler/claude-code-hooks-mastery) - Hooksã®å®Ÿè·µä¾‹
- [claude-code-showcase](https://github.com/ChrisWiles/claude-code-showcase) - è¨­å®šä¾‹

### å‚è€ƒè¨˜äº‹
- [Claude Code Best Practices (Anthropic)](https://www.anthropic.com/engineering/claude-code-best-practices)
- [How Claude Code's Creator Uses It](https://medium.com/@rub1cc/how-claude-codes-creator-uses-it-10-best-practices-from-the-team-e43be312836f)
- [Claude Code Complete Guide](https://www.siddharthbharath.com/claude-code-the-complete-guide/)
- [Top 10 MCP Servers for Claude Code](https://apidog.com/blog/top-10-mcp-servers-for-claude-code/)

### æ—¥æœ¬èªå‚è€ƒè¨˜äº‹
- [Claude Codeã®å…¨ã¦ã®CHANGELOGã‚’è¿½ã£ã¦ãã¦](https://zenn.dev/oikon/articles/claude-code-2025) â€” 2025å¹´ã®å…¨CHANGELOGã®æ™‚ç³»åˆ—ã¾ã¨ã‚
- [Claude Codeãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹2026](https://qiita.com/dai_chi/items/63b15050cc1280c45f86) â€” Skills/MCP/Hooksã®çµ±åˆæ´»ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³

---

## æ¬¡å›ã®å­¦ç¿’å†é–‹æ–¹æ³•

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã€ä¸Šéƒ¨ã®é€²æ—ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’ç¢ºèªã—ã€æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã‹ã‚‰é–‹å§‹ã—ã¦ãã ã•ã„ã€‚

```bash
# å­¦ç¿’ã‚’å†é–‹ã™ã‚‹éš›ã®ã‚³ãƒãƒ³ãƒ‰
claude

# æœ€åˆã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹
"å­¦ç¿’ã‚’å†é–‹ã—ã™"
```
